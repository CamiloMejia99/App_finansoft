@model FNTC.Finansoft.Accounting.DTO.LiquidacionesDefinitivas.LiquidacionDefinitivaAso

@{
    Layout = "~/Views/Shared/_Layoutahorros.cshtml";
}

<style>
    .letra {
        font-size: 17px;
    }

    .letra2 {
        font-size: 20px;
    }
</style>
<script src="~/Scripts/jquery2-1-4.min.js"></script>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <div style="border:2px solid grey; border-radius:22px; background-color:white; width:1200px;">

            <table width="100%" height="124.8" border="0">
                <tbody>
                    <tr>
                        <td width="100%" align="center">
                            <img src="~/Areas/formularioVinculacion/Imagenes/LOGOCOOMISOL.png" width="400" height="2    00" alt="" />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%" align="center"><br><b>LIQUIDACION DEFINITIVA DE ASOCIADO<br /></b></td>
                    </tr>
                </tbody>
            </table>

            <table style="margin-left: 15%" width="100%">
                <tbody>
                    <tr><td><br /><br /><br /></td></tr>
                    <tr>
                        <td width="100%">
                            <label>Fecha: </label>
                            @Html.EditorFor(model => model.fechaLiquidacion, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.fechaLiquidacion, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>Nombre: </label>
                            <label id="nombre"></label>
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>Cedula: </label>
                            @Html.EditorFor(model => model.NIT, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.NIT, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>Agencia: </label>
                            @Html.EditorFor(model => model.agencia, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.agencia, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>

                    <tr><td><br /></td></tr>
                    <tr>
                        <td width="100%">
                            <label><b>Ahorros</b></label>
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>Aportes Sociales: </label>
                            @Html.EditorFor(model => model.aportesSociales, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.aportesSociales, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>Total Ahorros: </label>
                            @Html.EditorFor(model => model.totalAhorros, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.totalAhorros, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label><b>Creditos</b></label>
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>Credito De Consumo: </label>
                            @Html.EditorFor(model => model.creditoConsumo, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.creditoConsumo, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>Total Creditos: </label>
                            @Html.EditorFor(model => model.totalCreditos, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.totalCreditos, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>
                    <tr><td><br /></td></tr>
                    <tr>
                        <td width="100%">
                            <label><b>Saldo A Favor: </b></label>
                            @Html.EditorFor(model => model.saldoAFavor, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.saldoAFavor, "", new { @class = "text-danger" })
                            <br />
                        </td>
                    </tr>
                    <tr><td><br /><br /><br /><br /></td></tr>

                    <tr>
                        <td>
                            <div style="margin-left:700px; border:2px solid grey; border-radius:22px; width:140px; height:180px">
                                <table>
                                    <tr>
                                        <td width="50%" align="center" style="font-size: 10px;">
                                            <br>
                                            <br>
                                            <br>
                                            <br>
                                            <br><br>
                                            <br>
                                            <br><br>
                                            <br>
                                            <br>
                                            <br>
                                            <br>


                                            Huella dactilar
                                            <br>
                                            <br>
                                        </td>
                                    </tr>

                                </table>
                            </div>
                            <div class="col-md-5">
                                <label><b>Realizado Por</b></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label><b>Recibí de Conformidad</b></label>
                            </div>
                        </td>
                    </tr>
                    <tr><td><br /><br /><br /></td></tr>
                    <tr>
                        <td>
                            <label>Asesor: </label>
                            @Html.EditorFor(model => model.asesor, new { htmlAttributes = new { } })
                            @Html.ValidationMessageFor(model => model.asesor, "", new { @class = "text-danger" })
                        </td>
                    </tr>
                    <tr>
                        <td width="100%">
                            <label>COOPERATIVA MULTIACTIVA DE APORTE Y CREDITO COOMISOL</label>
                        </td>
                    </tr>
                    <tr><td><br /><br /><br /></td></tr>

                    <tr>
                        <td style="font-size: 20px">
                            <p>PARAGRAFO: El asociado recibe el 100% de sus aportes, por lo cual la COOPERATIVA MULTIACTIVA </p>
                            <p>DE APORTE Y CREDITO COOMISOL, queda a Paz y Salvo por todo concepto.</p>
                        </td>
                    </tr>
                    <tr><td><br /><br /><br /></td></tr>

                </tbody>
            </table>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Crear" class="btn btn-default" />
                </div>
            </div>

        </div>
    </div>
}

<div>
    @Html.ActionLink("Regresar al Listado", "Index")
</div>

<script>
        $(document).ready(function () {
            $.ajax({
                url: '@Url.Action("GetFechaActual","LiquidacionDefinitiva")',
                method: 'GET',
            }).done(function (data) {

                var FechaConvertida = moment(data).format("DD/MM/YYYY");
                $('#fechaLiquidacion').val(FechaConvertida);
            });
        });
    $(function () {
    	$("#NIT").change(function () {

	var url = "@Url.Action("GetTerceroInfo", "LiquidacionDefinitiva")";
	var terceroId = $("#NIT").val();
	var data = {
	terceroId: terceroId
	};
	$.post(url, data).done(function (data) {

        $("#nombre").text(String(data[0].nombre));
        $("#agencia").val(String(data[0].agencia));
        $("#aportesSociales").val(String(data[0].aportesSociales));
        $("#totalAhorros").val(String(data[0].creditos));
        $("#creditoConsumo").val(String(data[0].creditos));
        $("#totalCreditos").val(String(data[0].creditos));
        $("#saldoAFavor").val(String(data[0].aportesSociales));
        $("#asesor").val(String(data[0].asesor));

    }).fail(manejarErrorAjax).always(function () {
        //esta funcion siempreseejecuta
    });


        });
    function manejarErrorAjax(err) {
        console.log(err.responseText);
    }
	});
</script>
<script src="~/Scripts/moment.js"></script>